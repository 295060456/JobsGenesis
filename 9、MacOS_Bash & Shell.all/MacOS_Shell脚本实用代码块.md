# Shellå®ç”¨ä»£ç å—

[toc]
- [Shellå®ç”¨ä»£ç å—](#shellå®ç”¨ä»£ç å—)
  - [1ã€ç¬¬ä¸€è¡Œå›ºå®šå†™æ³•](#1ç¬¬ä¸€è¡Œå›ºå®šå†™æ³•)
  - [2ã€åŠ æƒé™(å½“å‰ç”¨æˆ·çš„æ‰§è¡Œæƒé™)](#2åŠ æƒé™å½“å‰ç”¨æˆ·çš„æ‰§è¡Œæƒé™)
  - [3ã€å…³äºè·¯å¾„](#3å…³äºè·¯å¾„)
  - [4ã€é”®ç›˜ç›‘å¬](#4é”®ç›˜ç›‘å¬)
  - [5ã€if/elseä¸¾ä¾‹](#5ifelseä¸¾ä¾‹)
  - [6ã€å­—ç¬¦ä¸²](#6å­—ç¬¦ä¸²)
    - [6.1ã€å­—ç¬¦ä¸²æ¯”è¾ƒ](#61å­—ç¬¦ä¸²æ¯”è¾ƒ)
    - [6.2ã€å­—ç¬¦ä¸²æˆªå–](#62å­—ç¬¦ä¸²æˆªå–)
      - [6.2.1ã€shellè„šæœ¬æˆªå–ä¸¤ä¸ªå…³é”®å­—ä¹‹é—´çš„å­—ç¬¦â¤ï¸](#621shellè„šæœ¬æˆªå–ä¸¤ä¸ªå…³é”®å­—ä¹‹é—´çš„å­—ç¬¦ï¸)
      - [6.2.2ã€å­—ç¬¦ä¸²å–æ•°å­—](#622å­—ç¬¦ä¸²å–æ•°å­—)
  - [7ã€for/in å’Œ do/doneä¸¾ä¾‹](#7forin-å’Œ-dodoneä¸¾ä¾‹)
  - [8ã€å¤šè¡Œæ³¨é‡Š](#8å¤šè¡Œæ³¨é‡Š)
  - [9ã€æ·»åŠ é»˜è®¤å€¼ï¼ˆå­—ç¬¦ä¸²ï¼‰](#9æ·»åŠ é»˜è®¤å€¼å­—ç¬¦ä¸²)
  - [10ã€æ¸…ç©ºæ–‡ä»¶ï¼ˆlocalGoEnvInfo.mdï¼‰](#10æ¸…ç©ºæ–‡ä»¶localgoenvinfomd)
  - [11ã€å†™æ–‡ä»¶](#11å†™æ–‡ä»¶)
    - [11.1ã€æ¥å—é”®ç›˜è¾“å…¥ï¼Œå‘æ–‡ä»¶å†™ä¸€æ®µå†…å®¹](#111æ¥å—é”®ç›˜è¾“å…¥å‘æ–‡ä»¶å†™ä¸€æ®µå†…å®¹)
    - [11.2ã€å‘æ–‡ä»¶å†™ä¸€è¡Œå†…å®¹](#112å‘æ–‡ä»¶å†™ä¸€è¡Œå†…å®¹)
  - [12ã€åœ¨åˆ—è¡¨é‡Œé¢ï¼ˆgem list --localï¼‰æœå¯»ï¼ˆgrepï¼‰æ–‡æœ¬ï¼ˆcocoapodsï¼‰](#12åœ¨åˆ—è¡¨é‡Œé¢gem-list---localæœå¯»grepæ–‡æœ¬cocoapods)
  - [13ã€è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯](#13è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯)
    - [13.1ã€ç»ˆç«¯è·å– `${HOME}`](#131ç»ˆç«¯è·å–-home)
    - [13.2ã€shell è„šæœ¬è·å–](#132shell-è„šæœ¬è·å–)
      - [13.2.1ã€æ‰“å°å‡ºå½“å‰çš„ç”¨æˆ·å](#1321æ‰“å°å‡ºå½“å‰çš„ç”¨æˆ·å)
      - [13.2.2ã€æ‰“å°å‡ºå½“å‰çš„ç”¨æˆ·è¿›ç¨‹ID](#1322æ‰“å°å‡ºå½“å‰çš„ç”¨æˆ·è¿›ç¨‹id)
      - [13.2.3ã€æ‰“å°å‡ºå½“å‰ç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯](#1323æ‰“å°å‡ºå½“å‰ç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯)
      - [13.2.4ã€æ‰“å°å½“å‰ç»ˆç«¯æ‰€æŒ‡å‘çš„è·¯å¾„](#1324æ‰“å°å½“å‰ç»ˆç«¯æ‰€æŒ‡å‘çš„è·¯å¾„)
      - [13.2.5ã€æ‰“å°å½“å‰æ‰§è¡Œçš„è„šæœ¬æ–‡ä»¶çš„çˆ¶ç›®å½•](#1325æ‰“å°å½“å‰æ‰§è¡Œçš„è„šæœ¬æ–‡ä»¶çš„çˆ¶ç›®å½•)
      - [13.2.6ã€å‚æ•°çš„è·å–](#1326å‚æ•°çš„è·å–)
        - [13.2.6.1ã€è·å–å‚æ•°çš„å€¼](#13261è·å–å‚æ•°çš„å€¼)
        - [13.2.6.2ã€ä¸¾ä¾‹è¯´æ˜ `"$*"` å’Œ `"$@"` çš„å·®å¼‚](#13262ä¸¾ä¾‹è¯´æ˜--å’Œ--çš„å·®å¼‚)
        - [13.2.6.3ã€è·å–ä½ç½®å‚æ•°çš„ä¸ªæ•°](#13263è·å–ä½ç½®å‚æ•°çš„ä¸ªæ•°)
  - [14ã€è·å–æ–‡ä»¶çš„è·¯å¾„ã€æ–‡ä»¶åã€åç¼€ã€çˆ¶çº§æ–‡ä»¶å¤¹åç­‰](#14è·å–æ–‡ä»¶çš„è·¯å¾„æ–‡ä»¶ååç¼€çˆ¶çº§æ–‡ä»¶å¤¹åç­‰)
    - [14.1ã€æå–æ–‡ä»¶å…¨å](#141æå–æ–‡ä»¶å…¨å)
    - [14.2ã€æå–åç¼€](#142æå–åç¼€)
    - [14.3ã€æå–å‡ºæˆ‘ä»¬éœ€è¦çš„æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•è·¯å¾„](#143æå–å‡ºæˆ‘ä»¬éœ€è¦çš„æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•è·¯å¾„)
    - [14.4ã€ã€æ´»å­¦æ´»ç”¨ã€‘æå–æˆ‘ä»¬éœ€è¦çš„æ–‡ä»¶æ‰€åœ¨è·¯å¾„çš„çˆ¶æ–‡ä»¶å¤¹åå­—](#144æ´»å­¦æ´»ç”¨æå–æˆ‘ä»¬éœ€è¦çš„æ–‡ä»¶æ‰€åœ¨è·¯å¾„çš„çˆ¶æ–‡ä»¶å¤¹åå­—)
    - [14.5ã€åŒçº§å»ºç«‹åŒåç›®å½•](#145åŒçº§å»ºç«‹åŒåç›®å½•)
    - [14.6ã€æ€»ç»“](#146æ€»ç»“)
  - [15ã€è·å–ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶å¤¹çš„åç§°å¹¶è¾“å‡º](#15è·å–ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶å¤¹çš„åç§°å¹¶è¾“å‡º)
  - [16ã€è·å–æ¡Œé¢è·¯å¾„](#16è·å–æ¡Œé¢è·¯å¾„)
  - [17ã€awk](#17awk)
  - [18ã€å…¶ä»–](#18å…¶ä»–)


*ç”¨ Visual Studio Code ä½œä¸ºIDEç¼–è¾‘ä»£ç *

```shell
code .
```

## 1ã€ç¬¬ä¸€è¡Œå›ºå®šå†™æ³•

```shell
#!/bin/bash
```

## 2ã€åŠ æƒé™(å½“å‰ç”¨æˆ·çš„æ‰§è¡Œæƒé™)

*èµ„æ–™æ¥æº*

[macæŸ¥çœ‹ã€ä¿®æ”¹æ–‡ä»¶æƒé™çš„å‘½ä»¤](https://www.jianshu.com/p/d11f2c49921b)

*ç”¨æˆ·ç»„*

```
u ä»£è¡¨ç”¨æˆ·;
g ä»£è¡¨ç”¨æˆ·ç»„;
o ä»£è¡¨å…¶ä»–;
a ä»£è¡¨æ‰€æœ‰;
```

*æƒé™*

```
-: ä»£è¡¨æ— æƒé™;
r: ä»£è¡¨å¯è¯»æƒé™;
w: ä»£è¡¨å¯å†™æƒé™;
x: ä»£è¡¨å¯æ‰§è¡Œæƒé™;
```

*ç¤ºä¾‹*

```shell
# å¦‚æœæ²¡æœ‰æ‰§è¡Œæƒé™ï¼Œåœ¨è¿™ä¸ªshæ–‡ä»¶çš„ç›®å½•ä¸‹ï¼Œæ‰§è¡Œchmod u+x *.sh
filePath=$(dirname $0)/$(basename $0)
echo "æˆ‘åœ¨è¿™é‡Œï¼š$filePath" 

# å®šä½ğŸ“Œäºè¯¥æ–‡ä»¶çš„å‚ç›´æ–‡ä»¶å¤¹è·¯å¾„
folderPath=$(dirname $0)
cd folderPath

# åŠ æƒé™ï¼ˆç»™å½“å‰ç”¨æˆ·åŠ æ‰§è¡Œæƒé™ï¼‰
fileFullName=$(basename $0)
chmod u+x $fileFullName
```

## 3ã€å…³äºè·¯å¾„

*èµ„æ–™æ¥æº*

[CSDN/shell ä¸­è·å–æ–‡ä»¶çœŸå®è·¯å¾„ï¼ˆç»å¯¹è·¯å¾„ï¼‰](https://blog.csdn.net/LGD_2008/article/details/45913957)

*è·å– MacOS ç³»ç»Ÿæ¡Œé¢è·¯å¾„*

```bash
echo "Users/"${USER}"/Desktop"
```

*è·å–è¯¥ sh æ–‡ä»¶çš„ç»å¯¹è·¯å¾„*

```shell
echo "$(dirname $0)/$(basename $0)" 
```

*è·å–è¯¥ sh æ–‡ä»¶æ‰€åœ¨ç›®å½•çš„ç»å¯¹è·¯å¾„*

```shell
filepath=$(cd "$(dirname "$0")"; pwd)
```

## 4ã€é”®ç›˜ç›‘å¬(read)â¤ï¸

### 4.1ã€é”®ç›˜è¾“å…¥ => å˜é‡

*é”®ç›˜è¾“å…¥å€¼åˆ°å˜é‡`defaultInput`*

```shell
read -p "è¯·è¾“å…¥é¡¹ç›®æ–‡ä»¶å¤¹åå­—,ä»¥å›è½¦ç»“æŸ:" folder_name
defaultInput $folder_name
# echo "The value of var is ${defaultInput}"
```

*æŠŠé”®ç›˜è¾“å…¥æ”¾å…¥å˜é‡`sure`*

```shell
read sure
```

### 4.2ã€é«˜çº§ç”¨æ³•ç¤ºä¾‹

```shell
#!/bin/bash

while true;do
    # æç¤ºç”¨æˆ·è¾“å…¥è·¯å¾„
    read -p "è¯·è¾“å…¥æ–‡ä»¶è·¯å¾„: " path
    # æ£€æŸ¥è·¯å¾„æ˜¯å¦å­˜åœ¨
    if [ -e "$path" ]
    then
        echo "è·¯å¾„å­˜åœ¨"
        # æå–ä¸å¸¦åç¼€çš„æ–‡ä»¶å
        filename=$(basename "$path" .$(echo "$path" | awk -F . '{print $NF}'))
        echo "æ–‡ä»¶åä¸º: $filename"
        break
    else
        echo "è·¯å¾„ä¸å­˜åœ¨ï¼Œè¯·é‡æ–°è¾“å…¥"
    fi
done
```

## 5ã€if/elseä¸¾ä¾‹

*è¯»å–åˆ¤å®šé”®ç›˜è¾“å…¥çš„å­—ç¬¦æ˜¯å¦ä¸ºå›è½¦*

```shell
read -p "è¯·è¾“å…¥é¡¹ç›®æ–‡ä»¶å¤¹åå­—,ä»¥å›è½¦ç»“æŸ:" folder_name
defaultInput $folder_name
if [[ $folder_name = "" ]];then

else
  
fi
```

*åˆ¤å®šå‘½ä»¤è¡Œå¯¹å¤–è¾“å‡ºå­—ç¬¦*

```shell
if brew -v;then
    echo "The package is installed"
    brew update
    brew doctor
    brew -v
else
    echo "The package is not installed"
    open https://brew.sh/
    /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
    ### brewç¯å¢ƒå˜é‡è®¾ç½®
    echo 'eval "$(/opt/homebrew/bin/brew shellenv)"' >> /Users/$(whoami)/.zprofile
    eval "$(/opt/homebrew/bin/brew shellenv)"
fi
```

*å‚æ•°è¯´æ˜*

```shell
<<'COMMENT'
å¤§äº -gt (greater than)
å°äº -lt (less than)
å¤§äºæˆ–ç­‰äº -ge (greater than or equal)
å°äºæˆ–ç­‰äº -le (less than or equal)
ä¸ç›¸ç­‰ -ne ï¼ˆnot equalï¼‰
ç›¸ç­‰ -eq ï¼ˆequalï¼‰
COMMENT
```

## 6ã€å­—ç¬¦ä¸²

### 6.1ã€å­—ç¬¦ä¸²æ¯”è¾ƒ

```shell
## åˆ¤å®šè·¯å¾„ä¸å…è®¸æ˜¯æ¡Œé¢
if [ "$folderPath" = "/Users/"${USER}"/Desktop" ]; then
    # echo "Paths are equal."
    echo "æ¡Œé¢ä¸å…è®¸æ‰§è¡Œæ­¤æ“ä½œï¼"
else
    # echo "Paths are different."
    cp $filePath $"/Users/"${USER}"/Desktop"
fi
```

### 6.2ã€å­—ç¬¦ä¸²æˆªå–

*èµ„æ–™æ¥æº*

[CSDN/shellè„šæœ¬æˆªå–ä¸¤ä¸ªå…³é”®å­—ä¹‹é—´çš„å­—ç¬¦](https://blog.csdn.net/you_123/article/details/125409826)

#### 6.2.1ã€shellè„šæœ¬æˆªå–ä¸¤ä¸ªå…³é”®å­—ä¹‹é—´çš„å­—ç¬¦â¤ï¸

```shell
#!/bin/sh

mysqlVersion=`mysql --version` # è·å–å‘½ä»¤è¾“å‡ºåˆ°å˜é‡ï¼šç”¨`å‘½ä»¤`
# mysql  Ver 8.0.33 for macos13.3 on arm64 (Homebrew)
echo $mysqlVersion | awk -F 'Ver ' '{ print $2 }' | awk -F ' for' '{ print $1 }'
```

#### 6.2.2ã€å­—ç¬¦ä¸²å–æ•°å­—

```bash
âœ  ~ echo "hdsad1.02.2.22" | sed -r "s/.*([0-9]+\.[0-9]+\.[0-9]+)(\.[0-9]+).*/\1/g"
1.02.2
echo "hdsad1.02.2.22" | sed -r "s/.*([0-9]+\.[0-9]+\.[0-9]+)(\.[0-9]+).*/\2/g"

âœ  ~ echo "hdsad1.02.2.22" | sed -r "s/.*([0-9]+\.[0-9]+\.[0-9]+)(\.[0-9]+).*/\2/g"
.22
```

```shell
version=$(mysql --version | awk -F 'Ver ' '{ print $2 }' | awk -F ' for' '{ print $1 }')
echo $version
```

## 7ã€for/in å’Œ do/doneä¸¾ä¾‹

```shell
for element in `gem list --local | grep cocoapods`
    do
        echo $"æ­£åœ¨å¸è½½CocoaPodså­æ¨¡å—ï¼š"$element$"......"
        # ä½¿ç”¨å‘½ä»¤é€ä¸ªåˆ é™¤
        sudo gem uninstall $element
    done
else
    echo "å–æ¶ˆå¸è½½CocoaPods"
fi
```

## 8ã€å¤šè¡Œæ³¨é‡Š

*æ·»åŠ å®šä¹‰*

```shell
<<'COMMENT'
Hi
COMMENT
```

## 9ã€æ·»åŠ é»˜è®¤å€¼ï¼ˆå­—ç¬¦ä¸²ï¼‰

```shell
function defaultInput() {
	result=${1}
	if [${1} = $""]
	then
		# ä»€ä¹ˆéƒ½ä¸è¾“å…¥ï¼Œå³é»˜è®¤å€¼
		result=$'Test'
	fi
}
```

## 10ã€æ¸…ç©ºæ–‡ä»¶ï¼ˆlocalGoEnvInfo.mdï¼‰

```shell
echo "" > localGoEnvInfo.md
```

## 11ã€å†™æ–‡ä»¶

### 11.1ã€æ¥å—é”®ç›˜è¾“å…¥ï¼Œå‘æ–‡ä»¶å†™ä¸€æ®µå†…å®¹

```shell
#ã€è¦†ç›–å†™å…¥ å’Œ è¿½åŠ å†™å…¥ å…±ç”¨çš„å‰ç½®æ¡ä»¶ã€‘
## æ–‡ä»¶å…¨åï¼ˆåŒ…å«åç¼€åï¼‰
fileFullName=${filePath##*/}
fileCopy_fullname=$"/Users/"${USER}"/Desktop/"$fileFullName
echo $fileCopy_fullname
## é”®ç›˜è¾“å…¥
read -p "è¯·è¾“å…¥éœ€è¦è¿½åŠ å†™å…¥çš„å†…å®¹ï¼Œä»¥å›è½¦ç»“æŸ:" file_content
```

```shell
# è¦†ç›–å†™å…¥
cat>$fileCopy_fullname<<EOF
// æ¥å—é”®ç›˜è¾“å…¥çš„è¦†ç›–å†™å…¥çš„å†…å®¹
$file_content
EOF
```

```shell
# è¿½åŠ å†™å…¥
cat>>$fileCopy_fullname<<EOF
// æ¥å—é”®ç›˜è¾“å…¥çš„è¿½åŠ å†™å…¥çš„å†…å®¹
$file_content
EOF
```

### 11.2ã€å‘æ–‡ä»¶å†™ä¸€è¡Œå†…å®¹

*é…ç½® **GOPATH** çš„ç¯å¢ƒå˜é‡*

```
1ã€å…¨å±€æœç´¢æ–‡ä»¶ï¼ˆ ~/.bash_profileï¼‰;
2ã€è¿›è¡Œæ–‡ä»¶å†…æŸ¥æ‰¾å­—ç¬¦ä¸²ï¼ˆGOPATHï¼‰;
3ã€å¹¶å¯¹å…¶è¿›è¡Œå†™å…¥ï¼ˆexport PATH="$GOPATH/bin:$PATH"ï¼‰ï¼Œå¹¶åˆ·æ–°é…ç½®;
4ã€å”¯ä¸€æ€§ï¼šç›®æ ‡æ–‡ä»¶é‡Œåªå…è®¸å†™å…¥ä¸€æ¬¡
```

```shell
grep GOPATH ~/.bash_profile
if [ $? -ne 0 ] ;then
	echo 'export PATH="$GOPATH/bin:$PATH"' >> ~/.bash_profile
	source ~/.bash_profile
fi
```

*é…ç½® **Homebrew** çš„ç¯å¢ƒå˜é‡*

```
1ã€å°† Homebrew æ·»åŠ åˆ°ç»ˆç«¯ä¼šè¯çš„ç¯å¢ƒå˜é‡ä¸­ï¼Œä»¥ä¾¿ç¡®ä¿æ‰€æœ‰ Homebrew å®‰è£…çš„è½¯ä»¶åŒ…éƒ½å¯ä»¥åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨ã€‚
echo 'eval "$(/opt/homebrew/bin/brew shellenv)"' >> /Users/$(whoami)/.zprofile
2ã€å°† Homebrew åŠ è½½åˆ°å½“å‰ Shell ä¼šè¯ä¸­ï¼Œä»¥ä¾¿ç«‹å³ç”Ÿæ•ˆã€‚è¿™æ„å‘³ç€æ‚¨ç°åœ¨å¯ä»¥ä½¿ç”¨ Homebrew æ¥å®‰è£…ã€æ›´æ–°å’Œåˆ é™¤è½¯ä»¶åŒ…ã€‚
eval "$(/opt/homebrew/bin/brew shellenv)"
```

## 12ã€åœ¨åˆ—è¡¨é‡Œé¢ï¼ˆgem list --localï¼‰æœå¯»ï¼ˆgrepï¼‰æ–‡æœ¬ï¼ˆcocoapodsï¼‰

```shell
echo "æŸ¥çœ‹æœ¬åœ°å®‰è£…è¿‡çš„cocopodsç›¸å…³ä¸œè¥¿"
gem list --local | grep cocoapods
```

### 12.1ã€grep è¿”å›çš„é€€å‡ºçŠ¶æ€

```
<<'COMMENT'
grep è¿”å›çš„é€€å‡ºçŠ¶æ€ä¸º0ï¼Œè¡¨ç¤ºæˆåŠŸ;
é€€å‡ºçŠ¶æ€ä¸º1ï¼Œè¡¨ç¤ºæ²¡æœ‰æ‰¾åˆ°;
å¦‚æœæ‰¾ä¸åˆ°æŒ‡å®šçš„æ–‡ä»¶ï¼Œé€€å‡ºçŠ¶æ€ä¸º2;
COMMENT
```

## 13ã€è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯

### 13.1ã€ç»ˆç«¯è·å– `${HOME}`

```bash
âœ  Shell å­¦ä¹  ${HOME}                   
âœ  ~ 
âœ  ~ echo ${HOME}              
/Users/jobs
âœ  ~ 
```

### 13.2ã€shell è„šæœ¬è·å–

#### 13.2.1ã€æ‰“å°å‡ºå½“å‰çš„ç”¨æˆ·å

**æ³¨æ„ï¼šè¿™é‡Œæ˜¯åŒå¼•å·**

```
echo "$USER"
```

æˆ–è€…

```
echo `whoami`
```

#### 13.2.2ã€æ‰“å°å‡ºå½“å‰çš„ç”¨æˆ·è¿›ç¨‹ID

```
echo "$UID"
```

æˆ–è€…

```
echo `id -u`
```

#### 13.2.3ã€æ‰“å°å‡ºå½“å‰ç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯

**æ’åˆ—æ¿å¼ä¸ä¸€**

```
echo `who am i`
```

æˆ–è€…

```
echo `who` 
```

æˆ–è€…

```
who
```

#### 13.2.4ã€æ‰“å°å½“å‰ç»ˆç«¯æ‰€æŒ‡å‘çš„è·¯å¾„

```
CRTDIR=$(pwd)
echo $CRTDIR
```

#### 13.2.5ã€æ‰“å°å½“å‰æ‰§è¡Œçš„è„šæœ¬æ–‡ä»¶çš„çˆ¶ç›®å½•

```
workdir=$(cd $(dirname $0); pwd)
echo $workdir
```

æˆ–è€…

```
PRG="$0"
while [ -h "$PRG" ] ; do
  ls=`ls -ld "$PRG"`
  link=`expr "$ls" : '.*-> \(.*\)$'`
  if expr "$link" : '/.*' > /dev/null; then
    PRG="$link"
  else
    PRG=`dirname "$PRG"`/"$link"
  fi
done
PRGDIR=$(cd $(dirname $PRG); pwd)
echo $PRGDIR
```

#### 13.2.5ã€è·å–å½“å‰æ‰§è¡Œè„šæœ¬çš„æ—¶é—´ï¼Œå¹¶å°†å…¶å­˜å‚¨åˆ°å˜é‡ä¸­

```
cur_time=$(date +"%Y-%m-%d %H:%M:%S")
echo "å½“å‰æ‰§è¡Œçš„è„šæœ¬æ—¶é—´æ˜¯ï¼š${cur_time}"
```

å…¶ä¸­ï¼Œ**$(date +"%Y-%m-%d %H:%M:%S")**ç”¨äºè·å–å½“å‰æ—¶é—´ï¼Œå¹¶å°†å…¶æ ¼å¼åŒ–ä¸ºå¹´-æœˆ-æ—¥ æ—¶:åˆ†:ç§’çš„å½¢å¼ã€‚
è¯¥æ—¶é—´å°†å­˜å‚¨åœ¨**cur_time**å˜é‡ä¸­ï¼Œå¹¶ä½¿ç”¨echoå‘½ä»¤å°†å…¶è¾“å‡ºåˆ°å±å¹•ä¸Šã€‚

å¦‚æœæƒ³è¦åœ¨è„šæœ¬æ‰§è¡ŒæœŸé—´ä¸æ–­æ›´æ–°å½“å‰æ—¶é—´ï¼Œå¯ä»¥å°†ä¸Šè¿°å‘½ä»¤æ”¾åœ¨ä¸€ä¸ªæ— é™å¾ªç¯ä¸­ï¼Œå¹¶æ·»åŠ ä¸€äº›ç¡çœ æ—¶é—´ï¼Œå¦‚ä¸‹æ‰€ç¤º:

```
while true
do
    cur_time=$(date +"%Y-%m-%d %H:%M:%S")
    echo "å½“å‰æ‰§è¡Œçš„è„šæœ¬æ—¶é—´æ˜¯ï¼š${cur_time}"
    sleep 1
done
```

è¿™å°†æ¯ç§’é’Ÿæ›´æ–°ä¸€æ¬¡å½“å‰æ—¶é—´ï¼Œå¹¶å°†å…¶è¾“å‡ºåˆ°å±å¹•ä¸Šã€‚

#### 13.2.6ã€å‚æ•°çš„è·å–

*èµ„æ–™æ¥æº*

[[segmentfault/BashæŠ€å·§:ä»‹ç» $0ã€$1ã€$2ã€$#ã€$@ã€$*ã€$? çš„å«ä¹‰](https://segmentfault.com/a/1190000021435389)]

##### 13.2.6.1ã€è·å–å‚æ•°çš„å€¼

*å‡è®¾æ‰§è¡Œ `./test.sh a b c` è¿™æ ·ä¸€ä¸ªå‘½ä»¤ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‚æ•°æ¥è·å–ä¸€äº›å€¼ï¼š*

```
$0
å¯¹åº” *./test.sh* è¿™ä¸ªå€¼ã€‚å¦‚æœæ‰§è¡Œçš„æ˜¯ ./work/test.shï¼Œ åˆ™å¯¹åº” *./work/test.sh* è¿™ä¸ªå€¼ï¼Œè€Œä¸æ˜¯åªè¿”å›æ–‡ä»¶åæœ¬èº«çš„éƒ¨åˆ†
```

```
$1
ä¼šè·å–åˆ° aï¼Œå³ "$1" å¯¹åº”ä¼ ç»™è„šæœ¬çš„ç¬¬ä¸€ä¸ªå‚æ•°
```

```
$2
ä¼šè·å–åˆ° bï¼Œå³ "$2" å¯¹åº”ä¼ ç»™è„šæœ¬çš„ç¬¬äºŒä¸ªå‚æ•°
```

```
$3
ä¼šè·å–åˆ° cï¼Œå³ "$3" å¯¹åº”ä¼ ç»™è„šæœ¬çš„ç¬¬ä¸‰ä¸ªå‚æ•°ã€‚"$4"ã€"$5" ç­‰å‚æ•°çš„å«ä¹‰ä¾æ­¤ç±»æ¨
```

```
$#
ä¼šè·å–åˆ° 3ï¼Œå¯¹åº”ä¼ å…¥è„šæœ¬çš„å‚æ•°ä¸ªæ•°ï¼Œç»Ÿè®¡çš„å‚æ•°ä¸åŒ…æ‹¬ "$0"
```

```
$@
ä¼šè·å–åˆ° "a" "b" "c"ï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰å‚æ•°çš„åˆ—è¡¨ï¼Œä¸åŒ…æ‹¬ "$0"
```

```
$*
ä¹Ÿä¼šè·å–åˆ° "a" "b" "c"ï¼Œ å…¶å€¼å’Œ "$@" ç›¸åŒã€‚ä½† "$*" å’Œ "$@" æœ‰æ‰€ä¸åŒ
"$*" æŠŠæ‰€æœ‰å‚æ•°åˆå¹¶æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œ "$@" ä¼šå¾—åˆ°ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°æ•°ç»„
```

```
$?
å¯ä»¥è·å–åˆ°æ‰§è¡Œ ./test.sh a b c å‘½ä»¤åçš„è¿”å›å€¼
åœ¨æ‰§è¡Œä¸€ä¸ªå‰å°å‘½ä»¤åï¼Œå¯ä»¥ç«‹å³ç”¨ "$?" è·å–åˆ°è¯¥å‘½ä»¤çš„è¿”å›å€¼
è¯¥å‘½ä»¤å¯ä»¥æ˜¯ç³»ç»Ÿè‡ªèº«çš„å‘½ä»¤ï¼Œå¯ä»¥æ˜¯ shell è„šæœ¬ï¼Œä¹Ÿå¯ä»¥æ˜¯è‡ªå®šä¹‰çš„ bash å‡½æ•°
å½“æ‰§è¡Œç³»ç»Ÿè‡ªèº«çš„å‘½ä»¤æ—¶ï¼Œ"$?" å¯¹åº”è¿™ä¸ªå‘½ä»¤çš„è¿”å›å€¼
å½“æ‰§è¡Œ shell è„šæœ¬æ—¶ï¼Œ"$?" å¯¹åº”è¯¥è„šæœ¬è°ƒç”¨ exit å‘½ä»¤è¿”å›çš„å€¼ã€‚å¦‚æœæ²¡æœ‰ä¸»åŠ¨è°ƒç”¨ exit å‘½ä»¤ï¼Œé»˜è®¤è¿”å›ä¸º 0
å½“æ‰§è¡Œè‡ªå®šä¹‰çš„ bash å‡½æ•°æ—¶ï¼Œ"$?" å¯¹åº”è¯¥å‡½æ•°è°ƒç”¨ return å‘½ä»¤è¿”å›çš„å€¼ã€‚å¦‚æœæ²¡æœ‰ä¸»åŠ¨è°ƒç”¨ return å‘½ä»¤ï¼Œé»˜è®¤è¿”å›ä¸º 0
```

```
$$
shellè„šæœ¬çš„è¿›ç¨‹å·
```

##### 13.2.6.2ã€ä¸¾ä¾‹è¯´æ˜ `"$*"` å’Œ `"$@"` çš„å·®å¼‚

*å‡è®¾æœ‰ä¸€ä¸ª `testparams.sh` è„šæœ¬ï¼Œå†…å®¹å¦‚ä¸‹ï¼š*

```bash
#!/bin/bash

for arg in "$*"; do
    echo "****:" $arg
done
echo --------------
for arg in "$@"; do
    echo "@@@@:" $arg
done
```

**è¿™ä¸ªè„šæœ¬åˆ†åˆ«éå† `"$*"` å’Œ `"$@"` æ‰©å±•åçš„å†…å®¹ï¼Œå¹¶æ‰“å°å‡ºæ¥ã€‚**

*æ‰§è¡Œ `./testparams.sh` è„šæœ¬ï¼Œç»“æœå¦‚ä¸‹ï¼š*

```bash
$ ./testparams.sh This is a test
****: This is a test
--------------
@@@@: This
@@@@: is
@@@@: a
@@@@: test
```

å¯ä»¥çœ‹åˆ°ï¼Œ`"$*"` åªäº§ç”Ÿä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œfor å¾ªç¯åªéå†ä¸€æ¬¡ã€‚
è€Œ `"$@"` äº§ç”Ÿäº†å¤šä¸ªå­—ç¬¦ä¸²ï¼Œfor å¾ªç¯éå†å¤šæ¬¡ï¼Œæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°æ•°ç»„ã€‚

**æ³¨æ„ï¼šå¦‚æœä¼ å…¥çš„å‚æ•°å¤šäº 9 ä¸ªï¼Œåˆ™ä¸èƒ½ä½¿ç”¨ `$10` æ¥å¼•ç”¨ç¬¬ 10 ä¸ªå‚æ•°ï¼Œè€Œæ˜¯è¦ç”¨ `${10}` æ¥å¼•ç”¨ã€‚**

å³ï¼Œéœ€è¦ç”¨å¤§æ‹¬å· `{}`æŠŠå¤§äº 9 çš„æ•°å­—æ‹¬èµ·æ¥ã€‚
ä¾‹å¦‚ï¼Œ`${10}` è¡¨ç¤ºè·å–ç¬¬ 10 ä¸ªå‚æ•°çš„å€¼ï¼Œå†™ä¸º `$10` è·å–ä¸åˆ°ç¬¬ 10 ä¸ªå‚æ•°çš„å€¼ã€‚
å®é™…ä¸Šï¼Œ`$10` ç›¸å½“äº `${1}0`ï¼Œä¹Ÿå°±æ˜¯å…ˆè·å– `$1` çš„å€¼

##### 13.2.6.3ã€è·å–ä½ç½®å‚æ•°çš„ä¸ªæ•°

*åœ¨ bash ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ `$#` æ¥è·å–ä¼ å…¥çš„å‘½ä»¤è¡Œæˆ–è€…ä¼ å…¥å‡½æ•°çš„å‚æ•°ä¸ªæ•°ã€‚*
**è¦æ³¨æ„çš„æ˜¯ï¼Œ`$#` ç»Ÿè®¡çš„å‚æ•°ä¸ªæ•°ä¸åŒ…æ‹¬è„šæœ¬è‡ªèº«åç§°æˆ–è€…å‡½æ•°åç§°ã€‚**
ä¾‹å¦‚ï¼Œæ‰§è¡Œ `./a.sh a b`ï¼Œåˆ™ `$#` æ˜¯ 2ï¼Œè€Œä¸æ˜¯ 3ã€‚

å¯ä»¥çœ‹åˆ°ï¼Œ`$#` å®é™…ä¸Šæ˜¯æ‰©å±•ä¸ºä½ç½®å‚æ•°ï¼ˆpositional parametersï¼‰çš„ä¸ªæ•°ï¼Œç»Ÿè®¡çš„å‚æ•°ä¸åŒ…æ‹¬ `$0`ã€‚

## 14ã€è·å–æ–‡ä»¶çš„è·¯å¾„ã€æ–‡ä»¶åã€åç¼€ã€çˆ¶çº§æ–‡ä»¶å¤¹åç­‰

*èµ„æ–™æ¥æº*

[CSDN/shellæˆªå–æ–‡ä»¶åå’Œæ–‡ä»¶ç›®å½•](https://blog.csdn.net/u010670689/article/details/53425111)

*ä»¥ `/dir1/dir2/file.txt `ä¸ºä¾‹*

ä½¿ç”¨ `${}`

### 14.1ã€æå–æ–‡ä»¶å…¨å

```bash
${var##*/}
è¯¥å‘½ä»¤çš„ä½œç”¨æ˜¯å»æ‰å˜é‡varä»å·¦è¾¹ç®—èµ·çš„æœ€åä¸€ä¸ª'/'å­—ç¬¦åŠå…¶å·¦è¾¹çš„å†…å®¹ï¼Œè¿”å›ä»å·¦è¾¹ç®—èµ·çš„æœ€åä¸€ä¸ª'/'ï¼ˆä¸å«è¯¥å­—ç¬¦ï¼‰çš„å³è¾¹çš„å†…å®¹ã€‚
ä½¿ç”¨è¯¥å‘½ä»¤ï¼Œå¯ä»¥æå–å‡ºæˆ‘ä»¬éœ€è¦çš„æ–‡ä»¶å file.txt
```

### 14.2ã€æå–åç¼€

```bash
${var##*.}
è¯¥å‘½ä»¤çš„ä½œç”¨æ˜¯å»æ‰å˜é‡varä»å·¦è¾¹ç®—èµ·çš„æœ€åä¸€ä¸ª'.'å­—ç¬¦åŠå…¶å·¦è¾¹çš„å†…å®¹ï¼Œè¿”å›ä»å·¦è¾¹ç®—èµ·çš„æœ€åä¸€ä¸ª'.'ï¼ˆä¸å«è¯¥å­—ç¬¦ï¼‰çš„å³è¾¹çš„å†…å®¹ã€‚
ä½¿ç”¨è¯¥å‘½ä»¤ï¼Œå¯ä»¥æå–å‡ºæˆ‘ä»¬éœ€è¦çš„æ–‡ä»¶åç¼€ã€‚

å¦‚æœæ–‡ä»¶çš„åç¼€ä¸ä»…æœ‰ä¸€ä¸ªï¼Œä¾‹å¦‚ï¼Œfile.tar.gzï¼Œå‘½ä»¤${var##*.}ä»…èƒ½æå–æœ€åä¸€ä¸ªåç¼€ï¼Œè€Œæˆ‘æƒ³æå–tar.gzæ—¶è¯¥æ€ä¹ˆåŠï¼Ÿé‚£ä¹ˆå°±è¦ç”¨ä¸‹é¢æ‰€è¯´çš„${var#*.}å‘½ä»¤äº†ã€‚

${var#*.}
è¯¥å‘½ä»¤çš„ä½œç”¨æ˜¯å»æ‰å˜é‡varä»å·¦è¾¹ç®—èµ·çš„ç¬¬ä¸€ä¸ª'.'å­—ç¬¦åŠå…¶å·¦è¾¹çš„å†…å®¹ï¼Œè¿”å›ä»å·¦è¾¹ç®—èµ·ç¬¬ä¸€ä¸ª'.'ï¼ˆä¸å«è¯¥å­—ç¬¦ï¼‰çš„å³è¾¹éƒ¨åˆ†çš„å†…å®¹ã€‚ä½¿ä½¿ç”¨è¯¥å‘½ä»¤ï¼Œå¯ä»¥æå–å‡ºæ–‡ä»¶çš„å¤šä¸ªåç¼€ã€‚
```

### 14.3ã€æå–å‡ºæˆ‘ä»¬éœ€è¦çš„æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•è·¯å¾„

```bash
${var%/*}
è¯¥å‘½ä»¤çš„ä½¿ç”¨æ˜¯å»æ‰å˜é‡varä»å³è¾¹ç®—èµ·çš„ç¬¬ä¸€ä¸ª'/'å­—ç¬¦åŠå…¶å³è¾¹çš„å†…å®¹ï¼Œè¿”å›ä»å³è¾¹ç®—èµ·çš„ç¬¬ä¸€ä¸ª'/'ï¼ˆä¸å«è¯¥å­—ç¬¦ï¼‰çš„å·¦è¾¹çš„å†…å®¹ã€‚ä½¿ç”¨ä½¿ç”¨è¯¥å‘½ä»¤ï¼Œå¯ä»¥æå–å‡ºæˆ‘ä»¬éœ€è¦çš„æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•
```

### 14.4ã€ã€æ´»å­¦æ´»ç”¨ã€‘æå–æˆ‘ä»¬éœ€è¦çš„æ–‡ä»¶æ‰€åœ¨è·¯å¾„çš„çˆ¶æ–‡ä»¶å¤¹åå­—

```bash
æ–‡ä»¶æ‰€åœ¨ç›®å½•è·¯å¾„
folderPath=${filePath%/*}
æ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹å
folderName=${folderPath##*/}
```

### 14.5ã€åŒçº§å»ºç«‹åŒåç›®å½•

```bash
${var%%.*}
è¯¥å‘½ä»¤çš„ä½¿ç”¨æ˜¯å»æ‰å˜é‡varä»å³è¾¹ç®—èµ·çš„æœ€åä¸€ä¸ª'.'å­—ç¬¦åŠå…¶å³è¾¹çš„å†…å®¹ï¼Œè¿”å›ä»å³è¾¹ç®—èµ·çš„æœ€åä¸€ä¸ª'.'ï¼ˆä¸å«è¯¥å­—ç¬¦ï¼‰çš„å·¦è¾¹çš„å†…å®¹ã€‚å½“æˆ‘ä»¬éœ€è¦å»ºç«‹ä¸€ä¸ªä¸æ–‡ä»¶åç›¸åŒåå­—ï¼ˆæ²¡æœ‰åç¼€ï¼‰çš„ç›®å½•ä¸å¯¹åº”çš„æ–‡ä»¶ç›¸å¯¹åº”æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨è¯¥å‘½ä»¤æ¥è¿›è¡Œæ“ä½œã€‚
ä¾‹å¦‚ï¼Œè§£å‹æ–‡ä»¶çš„æƒ…å†µå°±ä¸æ­¤ç±»ä¼¼ï¼Œæˆ‘ä»¬å‹ç¼©æ–‡ä»¶file.zipæ—¶ï¼Œä¼šåœ¨ä¸file.zipåŒçº§ç›®å½•ä¸‹å»ºç«‹ä¸€ä¸ªåä¸ºfileçš„ç›®å½•ã€‚
```

### 14.6ã€æ€»ç»“

```bash
å…¶å®${}å¹¶ä¸æ˜¯ä¸“é—¨ä¸ºæå–æ–‡ä»¶åæˆ–ç›®å½•åçš„ï¼Œå®ƒçš„ä½¿ç”¨æ˜¯å˜é‡çš„æå–å’Œæ›¿æ¢ç­‰ç­‰æ“ä½œï¼Œå®ƒå¯ä»¥æå–éå¸¸å¤šçš„å†…å®¹ï¼Œå¹¶ä¸ä¸€å®šæ˜¯ä¸Šé¢äº”ä¸ªä¾‹å­ä¸­çš„'/'æˆ–'.'ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸Šé¢çš„ä½¿ç”¨æ–¹æ³•åªæ˜¯å®ƒä½¿ç”¨çš„ä¸€ä¸ªç‰¹ä¾‹ã€‚

çœ‹åˆ°ä¸Šé¢çš„è¿™äº›å‘½ä»¤ï¼Œå¯èƒ½ä¼šè®©äººæ„Ÿåˆ°éå¸¸éš¾ä»¥ç†è§£å’Œè®°å¿†ï¼Œå…¶å®ä¸ç„¶ï¼Œå®ƒä»¬éƒ½æ˜¯æœ‰è§„å¾‹çš„ã€‚
#ï¼šè¡¨ç¤ºä»å·¦è¾¹ç®—èµ·ç¬¬ä¸€ä¸ª
%ï¼šè¡¨ç¤ºä»å³è¾¹ç®—èµ·ç¬¬ä¸€ä¸ª
##ï¼šè¡¨ç¤ºä»å·¦è¾¹ç®—èµ·æœ€åä¸€ä¸ª
%%ï¼šè¡¨ç¤ºä»å³è¾¹ç®—èµ·æœ€åä¸€ä¸ª
æ¢å¥è¯æ¥è¯´ï¼Œï¼ƒæ€»æ˜¯è¡¨ç¤ºå·¦è¾¹ç®—èµ·ï¼Œï¼…æ€»æ˜¯è¡¨ç¤ºå³è¾¹ç®—èµ·ã€‚

ï¼Šï¼šè¡¨ç¤ºè¦åˆ é™¤çš„å†…å®¹ï¼Œå¯¹äº#å’Œ##çš„æƒ…å†µï¼Œå®ƒä½äºæŒ‡å®šçš„å­—ç¬¦ï¼ˆä¾‹å­ä¸­çš„'/'å’Œ'.'ï¼‰çš„å·¦è¾¹ï¼Œè¡¨äºåˆ é™¤æŒ‡å®šå­—ç¬¦åŠå…¶å·¦è¾¹çš„å†…å®¹ï¼›å¯¹äº%å’Œ%%çš„æƒ…å†µï¼Œå®ƒä½äºæŒ‡å®šçš„å­—ç¬¦ï¼ˆä¾‹å­ä¸­çš„'/'å’Œ'.'ï¼‰çš„å³è¾¹ï¼Œè¡¨ç¤ºåˆ é™¤æŒ‡å®šå­—ç¬¦åŠå…¶å³è¾¹çš„å†…å®¹ã€‚è¿™é‡Œçš„'*'çš„ä½ç½®ä¸èƒ½äº’æ¢ï¼Œå³ä¸èƒ½æŠŠ*å·æ”¾åœ¨#æˆ–##çš„å³è¾¹ï¼Œåä¹‹äº¦ç„¶ã€‚

ä¾‹å¦‚ï¼š${var%%x*}è¡¨ç¤ºæ‰¾å‡ºä»å³è¾¹ç®—èµ·æœ€åä¸€ä¸ªå­—ç¬¦xï¼Œå¹¶åˆ é™¤å­—ç¬¦xåŠå…¶å³è¾¹çš„å­—ç¬¦ã€‚
```

```bash
# è¯»å–é”®ç›˜è¾“å…¥ï¼Œå›è½¦ç»“æŸç›‘å¬è®°å½•
read -p "æ‹–å…¥æ–‡ä»¶:" filePath
## æ–‡ä»¶å…¨åï¼ˆåŒ…å«åç¼€åï¼‰
fileFullName=${filePath##*/}
## æ–‡ä»¶çš„åç¼€åï¼ˆåªé’ˆå¯¹æœ€å³è¾¹çš„ä¸€ä¸ªåç¼€åæœ‰æ•ˆï¼‰
fileSuffixName=${filePath##*.}
## æ–‡ä»¶çš„åç¼€åï¼ˆå¤šåç¼€åæœ‰æ•ˆï¼‰
fileSuffixName2=${filePath#*.}
## æ–‡ä»¶æ‰€åœ¨ç›®å½•è·¯å¾„
folderPath=${filePath%/*}
## æ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹å
folderName=${folderPath##*/}
```

## 15ã€è·å–ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶å¤¹çš„åç§°å¹¶è¾“å‡º

```bash
#!/bin/bash

# æ–¹æ³•ä¸€ 
dir=$(ls -l /usr/ |awk '/^d/ {print $NF}')
for i in $dir
    do
     echo $i
    done   

# æ–¹æ³•äºŒ
for dir in $(ls /usr/)
    do
        [ -d $dir ] && echo $dir
    done
# æ–¹æ³•ä¸‰
ls -l /usr/ |awk '/^d/ {print $NF}' ## å…¶å®åŒæ–¹æ³•ä¸€ï¼Œç›´æ¥å°±å¯ä»¥æ˜¾ç¤ºä¸ç”¨forå¾ªç¯  
```

## 16ã€è·å–æ¡Œé¢è·¯å¾„

```shell
echo "Users/"${USER}"/Desktop"
```

## 17ã€awk

**ç›´æ¥æ‰“å°awkçš„ç»“æœ**

```shell
echo `mysql --version`| awk -F 'Ver ' '{ print $2 }' | awk -F ' for' '{ print $1 }'
```

**ç”¨shellå˜é‡è¿›è¡Œæ‰¿æ¥awkçš„ç»“æœ**

```shell
version=$(mysql --version | awk -F 'Ver ' '{ print $2 }' | awk -F ' for' '{ print $1 }')
echo $version
```

## 18ã€æ£€æµ‹æœ¬æœºMacOS æ˜¯å¦å®‰è£…äº†brew

*å¦‚æœæ²¡æœ‰å®‰è£…åˆ™ä¸‹è½½å®‰è£…ï¼Œå·²ç»å®‰è£…åˆ™è¿›è¡Œè·³è¿‡å¤„ç†*

```shell
#!/bin/bash

# æ£€æµ‹æ˜¯å¦å·²ç»å®‰è£…äº†brew
if ! command -v brew &> /dev/null
then
    echo "brew æœªå®‰è£…ï¼Œå¼€å§‹å®‰è£…..."
    open https://brew.sh/
    /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
    ## brewç¯å¢ƒå˜é‡è®¾ç½®
    echo 'eval "$(/opt/homebrew/bin/brew shellenv)"' >> /Users/$(whoami)/.zprofile
    open /Users/$(whoami)/.zprofile
    eval "$(/opt/homebrew/bin/brew shellenv)"
else
    echo "brew å·²ç»å®‰è£…ï¼Œè·³è¿‡å®‰è£…æ­¥éª¤ã€‚"
    ## brew å‡çº§
    brew update
    brew doctor
    brew -v
fi
```

*å¸è½½ brew* 

```shell
echo "======== ä¸ç®¡ç³»ç»Ÿæœ‰æ²¡æœ‰å®‰è£…brew é¦–å…ˆå…¨éƒ¨å½’é›¶ ========"
echo "æ‰§è¡Œbrewåƒåœ¾æ¸…é™¤..."
brew cleanup
echo "å‡†å¤‡å¸è½½Homebrew..."
/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/uninstall)"  
echo "å‡†å¤‡æ‰‹åŠ¨æ¸…é™¤Homebrewå®‰è£…æ®‹ç•™ï¼ˆå¯èƒ½éœ€è¦è¾“å…¥ç®¡ç†å‘˜å¯†ç ï¼‰"
sudo rm -rf /usr/local/Caskroom/
sudo rm -rf /usr/local/Frameworks/
sudo rm -rf /usr/local/Homebrew/
sudo rm -rf /usr/local/bin/
sudo rm -rf /usr/local/etc/
sudo rm -rf /usr/local/include/
sudo rm -rf /usr/local/lib/
sudo rm -rf /usr/local/opt/
sudo rm -rf /usr/local/sbin/
sudo rm -rf /usr/local/share/
sudo rm -rf /usr/local/var/
# è§£å†³ Running `brew update --preinstall`... fatal: Could not resolve HEAD to a revision
sudo rm -rf $(brew --repo homebrew/core)
echo "======== æ‰§è¡Œå®Œæ¯•brewå½’é›¶æ“ä½œ ========"
```

## 19ã€æ£€æµ‹æœ¬æœºMacOS ä¸Šçš„ brewï¼Œæ˜¯å¦å·²ç»å®‰è£…æŸä¸ªç”± brew ç®¡ç†çš„è½¯ä»¶

### 19.1ã€å•ä¸€è½¯ä»¶çš„åˆ¤å®š

*å¦‚æœæ²¡æœ‰å®‰è£…åˆ™ä¸‹è½½å®‰è£…ï¼Œå·²ç»å®‰è£…åˆ™è¿›è¡Œè·³è¿‡å¤„ç†*

ä¾‹ï¼š`pandoc`

```shell
#!/bin/bash

# æ£€æµ‹æ˜¯å¦å·²ç»å®‰è£…äº†pandoc
if ! command -v pandoc &> /dev/null
then
    echo "pandoc æœªå®‰è£…ï¼Œå¼€å§‹å®‰è£…..."
    brew install pandoc
else
    echo "pandoc å·²ç»å®‰è£…ï¼Œè·³è¿‡å®‰è£…æ­¥éª¤ã€‚"
fi
```

*æˆ–è€…*

```shell
if [[ $(command -v pandoc) ]]; then
  echo "pandoc is already installed."
else
  echo "pandoc is not installed. Installing..."
  brew install pandoc
fi
```

### 19.2ã€å¤šè½¯ä»¶çš„åˆ¤å®šï¼Œä¾‹ï¼š`curl` + `wget`

```shell
if [[ -z â€œ$(command -v curl)â€ || -z â€œ$(command -v wget)â€ ]]; then
echo â€œæœªæ£€æµ‹åˆ°curlæˆ–wgetå‘½ä»¤ï¼Œç°åœ¨å¼€å§‹å®‰è£…curlå‘½ä»¤â€¦â€
echo â€œâ€
brew install curl
echo â€œâ€
fi
```
